<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perceptron Network NFT Creator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Rowdies:wght@400;700&display=swap">
</head>
<body>
  <div id="version">Version 87</div>
  <div id="left-panel">
    <img id="logo" src="/AIFN1-nft-minting/images/perceptron-network-nft-creator-logo.webp" alt="Perceptron Network NFT Creator Logo">
  </div>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-image: url('/AIFN1-nft-minting/images/background.webp');
      background-repeat: repeat-y;
      background-position: center top;
      background-size: 100% auto;
      color: black;
      padding: 20px;
      margin: 0;
      display: flex;
      position: relative;
      min-height: 100vh;
    }
    #version {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 12px;
      color: #333;
      z-index: 10;
    }
    #left-panel {
      flex: 1;
      padding-right: 20px;
      padding-top: 30px;
      min-width: 300px;
    }
    #logo {
      display: block;
      margin: 0 auto 20px;
      width: 600px;
      max-width: 600px;
      height: auto;
    }
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      #logo { width: 300px; }
    }
    .trait-section {
      margin-bottom: 20px;
    }
    .trait-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .trait-section h2 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0;
      text-align: left;
      flex-grow: 1;
    }
    .trait-controls {
      display: flex;
      gap: 10px;
    }
    .trait-controls span {
      cursor: pointer;
      font-size: 16px;
      color: #666;
      position: relative; /* For tooltip positioning */
    }
    .trait-controls span:hover {
      opacity: 0.8;
    }
    /* Custom tooltip for add-trait button */
    .add-trait:hover::after {
      content: 'Insert New Trait Here';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .add-trait:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for remove-trait button */
    .remove-trait:hover::after {
      content: 'Remove this Trait\nand its Variants';
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: pre; /* Preserve line break */
      line-height: 1.2; /* Ensure proper line spacing */
      text-align: center;
      z-index: 1000;
    }
    .remove-trait:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for up-arrow button */
    .up-arrow:hover::after {
      content: attr(data-tooltip); /* Use data-tooltip attribute for dynamic text */
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .up-arrow:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for down-arrow button */
    .down-arrow:hover::after {
      content: attr(data-tooltip); /* Use data-tooltip attribute for dynamic text */
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .down-arrow:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    .trait-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .variation-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    .variation-image-wrapper {
      width: 110px;
      height: 110px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .variation-image-wrapper.selected {
      border: 5px solid #f4c149;
    }
    .variation {
      width: 100px;
      height: 100px;
      object-fit: contain;
    }
    .variation-filename {
      font-size: 8px;
      text-align: center;
      margin-top: 5px;
      word-break: break-all;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 5px;
      box-sizing: border-box;
      height: 32px;
    }
    input[type="file"] {
      display: none;
    }
    .file-input-label {
      display: inline-block;
      padding: 5px 10px;
      background: #ccc;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin-bottom: 5px;
      height: 27.2px; /* Reduced from 32px by 15% (32 * 0.85 = 27.2) */
      line-height: 17.2px; /* Adjusted to center text (27.2 - 10 padding = 17.2) */
      box-sizing: border-box;
      text-align: center;
      min-width: 120px; /* Minimum width for "Choose Files" */
      width: auto; /* Allow width to grow */
      white-space: nowrap; /* Prevent text wrapping */
      vertical-align: middle; /* Ensure alignment with input */
    }
    .file-input-label:hover {
      background: #bbb;
    }
  </style>

  <div id="trait-container"></div>

  <style>
    #trait-container {
      margin-top: 20px;
    }
  </style>

  <div id="right-panel">
    <div id="preview-container">
      <h2>Preview</h2>
      <div id="preview"></div>
      <div id="coordinates"><strong>Coordinates:</strong> (1, 1)</div>
      <div id="controls">
        <span class="direction-emoji" data-direction="up">‚¨ÜÔ∏è</span>
        <span class="direction-emoji" data-direction="down">‚¨áÔ∏è</span>
        <span class="direction-emoji" data-direction="left">‚¨ÖÔ∏è</span>
        <span class="direction-emoji" data-direction="right">‚û°Ô∏è</span>
        <span class="magnify-emoji">üîç</span>
      </div>
    </div>
    <div id="enlarged-preview"></div>
  </div>

  <style>
    #right-panel {
      flex: 1;
      padding-left: 20px;
      padding-top: 30px;
      min-width: 300px;
    }
    #preview-container {
      position: relative;
      margin-bottom: 20px;
    }
    #preview-container h2 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0 0 10px;
      text-align: left;
    }
    #preview {
      width: 600px;
      height: 600px;
      background: #ccc;
      position: relative;
      overflow: hidden;
    }
    #preview img {
      position: absolute;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      cursor: grab;
    }
    #preview img.dragging {
      cursor: grabbing;
    }
    #coordinates {
      margin-top: 10px;
      font-size: 14px;
    }
    #controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    .direction-emoji, .magnify-emoji {
      cursor: pointer;
      font-size: 20px;
    }
    .direction-emoji:hover, .magnify-emoji:hover {
      opacity: 0.8;
    }
    #enlarged-preview {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      border-radius: 10px;
      overflow: hidden;
    }
    #enlarged-preview img {
      position: absolute;
    }
  </style>

  <div id="preview-samples">
    <h2>Preview Samples</h2>
    <div id="preview-samples-grid"></div>
    <button id="update-previews">Update</button>
    <button id="mintButton">Mint NFT</button>
    <div id="mintFeeDisplay">Fetching mint fee...</div>
  </div>

  <style>
    #preview-samples {
      margin-top: 20px;
    }
    #preview-samples h2 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0 0 10px;
      text-align: left;
    }
    #preview-samples-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }
    .sample-container {
      width: 140px;
      height: 140px;
      background: #ccc;
      position: relative;
      overflow: hidden;
    }
    .sample-container img {
      position: absolute;
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    #update-previews, #mintButton {
      padding: 10px 20px;
      background: #ccc;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }
    #update-previews:hover, #mintButton:hover {
      background: #bbb;
    }
    #mintButton:disabled {
      background: #ddd;
      cursor: not-allowed;
    }
    #mintFeeDisplay {
      margin-top: 10px;
      font-size: 14px;
    }
  </style>

  <div id="ai-background">
    <h2>AI Background</h2>
    <label for="base-prompt">Basic Prompt:</label>
    <textarea id="base-prompt" rows="5" cols="50">igirl, shinyang, ((small breasts))), (white skull belt buckle, front hair locks, black flat dragon tattoo on right shoulder, black flat dragon tattoo on right arm, red clothes, shoulder tattoo,1:1), golden jewelry, long hair, earrings, black hair, golden hoop earrings, clothing cutout, cleavage cutout, bracelet, midriff, navel, makeup, holding, pirate pistol, lips, pirate gun, black shorts, looking at viewer, dynamic pose, ((asian girl)), action pose, (white skull belt buckle), black dragon tattoo on right arm, (shoulder tattoo)</textarea>
    <label for="user-prompt">User Prompt:</label>
    <textarea id="user-prompt" rows="2" cols="50" placeholder="Add your custom prompt (e.g., 'with a cyberpunk city background')"></textarea>
    <button id="generate-background">Generate Bkgd</button>
    <div id="background-metadata"></div>
    <img id="background-image" src="" alt="AI Background">
  </div>

  <style>
    #ai-background {
      margin-top: 20px;
    }
    #ai-background h2 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0 0 10px;
      text-align: left;
    }
    #ai-background label {
      display: block;
      margin: 10px 0 5px;
      font-size: 14px;
    }
    #ai-background textarea {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
    }
    #generate-background {
      margin-top: 10px;
      padding: 10px 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    #generate-background:hover {
      background: #45a049;
    }
    #background-metadata {
      margin: 10px 0;
      font-size: 14px;
    }
    #background-image {
      display: block;
      max-width: 100%;
      height: auto;
      margin-top: 10px;
      border-radius: 5px;
    }
  </style>

  <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="/AIFN1-nft-minting/config.js"></script>
  <script src="/AIFN1-nft-minting/lockdown-install.js"></script>
  <script src="/AIFN1-nft-minting/lockdown-run.js"></script>
  <script src="/AIFN1-nft-minting/entry.js"></script>
</body>
</html>
