<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perceptron Network NFT Creator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Rowdies:wght@400;700&display=swap">
  <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="config.js"></script>
  <script src="entry.js"></script>
</head>
<body>
  <div id="version">Version 87</div>
  <div id="left-panel">
    <img id="logo" src="/AIFN1-nft-minting/images/logo.png" alt="Perceptron Network NFT Creator">
    <div id="trait-container"></div>
    <h1>AI Background</h1>
    <h2>Basic Prompt:</h2>
    <textarea id="base-prompt" rows="5" cols="50">igirl, shinyang, (((small breasts))), (white skull belt buckle, front hair locks, black flat dragon tattoo on right shoulder, black flat dragon tattoo on right arm, red clothes, shoulder tattoo,:1.1), golden jewelry, long hair, earrings, black hair, clothing cutout, ponytail, cleavage cutout, cleavage, bracelet, midriff, cheongsam top, red choli top, pirate pose, (white skull belt buckle), black shorts, looking at viewer, dynamic pose, ((asian girl)), action pose, black dragon tattoo on right shoulder, black dragon tattoo on right arm, ((shoulder tattoo))</textarea>
    <h2>User Prompt:</h2>
    <textarea id="user-prompt" rows="2" cols="50" placeholder="Add your custom prompt (e.g., 'with a cyberpunk city background')"></textarea>
    <button id="generate-background">Generate Bkgd</button>
  </div>
  <div id="right-panel">
    <h1>Preview</h1>
    <div id="preview"></div>
    <div id="coordinates"><strong>Coordinates:</strong> (1, 1)</div>
    <div id="direction-emojis">
      <span class="direction-emoji" data-direction="up">‚¨ÜÔ∏è</span>
      <span class="direction-emoji" data-direction="down">‚¨áÔ∏è</span>
      <span class="direction-emoji" data-direction="left">‚¨ÖÔ∏è</span>
      <span class="direction-emoji" data-direction="right">‚û°Ô∏è</span>
      <span class="magnify-emoji">üîç</span>
    </div>
    <div id="enlarged-preview"></div>
    <h1>Preview Samples</h1>
    <div id="preview-samples-grid"></div>
    <button id="update-previews">Update</button>
  </div>
  <div id="mint-section">
    <button id="mintButton" disabled>Mint NFT</button>
    <div id="mintFeeDisplay">Fetching mint fee...</div>
  </div>
  <div id="background-section">
    <h1>Background</h1>
    <img id="background-image" src="" alt="Generated Background">
    <div id="background-metadata"></div>
  </div>

  <!-- Section 9 - SPHERE ANIMATION HTML (from 2 iterations ago) -->
  <div class="animation-wrapper">
    <svg class="sphere-animation" viewBox="0 0 440 440">
      <defs>
        <linearGradient id="sphereGradient" x1="5%" y1="0%" x2="5%" y2="100%">
          <stop offset="0%" stop-color="#000000" stop-opacity="1"/>
          <stop offset="100%" stop-color="#000000" stop-opacity="0.5"/>
        </linearGradient>
      </defs>
      <g class="sphere">
        <path d="M220,220 m-200,0 a200,200 0 1,0 400,0 a200,200 0 1,0 -400,0"/>
        <path d="M220,220 m-180,0 a180,180 0 1,0 360,0 a180,180 0 1,0 -360,0"/>
        <path d="M220,220 m-160,0 a160,160 0 1,0 320,0 a160,160 0 1,0 -320,0"/>
        <path d="M220,220 m-140,0 a140,140 0 1,0 280,0 a140,140 0 1,0 -280,0"/>
        <path d="M220,220 m-120,0 a120,120 0 1,0 240,0 a120,120 0 1,0 -240,0"/>
        <path d="M220,220 m-100,0 a100,100 0 1,0 200,0 a100,100 0 1,0 -200,0"/>
        <path d="M220,220 m-80,0 a80,80 0 1,0 160,0 a80,80 0 1,0 -160,0"/>
        <path d="M220,220 m-60,0 a60,60 0 1,0 120,0 a60,60 0 1,0 -120,0"/>
        <path d="M220,220 m-40,0 a40,40 0 1,0 80,0 a40,40 0 1,0 -80,0"/>
        <path d="M220,220 m-20,0 a20,20 0 1,0 40,0 a20,20 0 1,0 -40,0"/>
      </g>
    </svg>
  </div>

  <!-- Section 2 - STYLE/CSS - LEFT AND TOP (LAYOUT AND TRAITS) -->
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-image: url('/AIFN1-nft-minting/images/background.webp');
      background-repeat: repeat-y;
      background-position: center top;
      background-size: 100% auto;
      color: black;
      padding: 20px;
      margin: 0;
      display: flex;
      position: relative;
      min-height: 100vh;
      width: 50%; /* Set to 50% to reduce sphere size */
    }
    #version {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 12px;
      color: #333;
      z-index: 10;
    }
    #left-panel {
      flex: 1;
      padding-right: 20px;
      padding-top: 30px;
      min-width: 300px;
    }
    #logo {
      display: block;
      margin: 0 auto 20px;
      width: 600px;
      max-width: 600px;
      height: auto;
    }
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      #logo { width: 300px; }
    }
    .trait-section {
      margin-bottom: 20px;
    }
    .trait-header {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .trait-section h2 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0;
      text-align: left;
      flex-grow: 1;
    }
    .trait-controls {
      display: flex;
      gap: 10px;
    }
    .trait-controls span {
      cursor: pointer;
      font-size: 16px;
      color: #666;
      position: relative; /* For tooltip positioning */
    }
    .trait-controls span:hover {
      opacity: 0.8;
    }
    /* Custom tooltip for add-trait button */
    .add-trait:hover::after {
      content: 'Insert New Trait Here';
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .add-trait:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for remove-trait button */
    .remove-trait:hover::after {
      content: 'Remove this Trait\nand its Variants';
      position: absolute;
      top: -40px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: pre; /* Preserve line break */
      line-height: 1.2; /* Ensure proper line spacing */
      text-align: center;
      z-index: 1000;
    }
    .remove-trait:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for up-arrow button */
    .up-arrow:hover::after {
      content: attr(data-tooltip); /* Use data-tooltip attribute for dynamic text */
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .up-arrow:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    /* Custom tooltip for down-arrow button */
    .down-arrow:hover::after {
      content: attr(data-tooltip); /* Use data-tooltip attribute for dynamic text */
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: #333;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 1000;
    }
    .down-arrow:hover::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
      z-index: 1000;
    }
    .trait-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .variation-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    .variation-image-wrapper {
      width: 110px;
      height: 110px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .variation-image-wrapper.selected {
      border: 5px solid #f4c149;
    }
    .variation {
      width: 100px;
      height: 100px;
      object-fit: contain;
    }
    .variation-filename {
      font-size: 8px;
      text-align: center;
      margin-top: 5px;
      word-break: break-all;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 5px;
      box-sizing: border-box;
      height: 32px;
    }
    input[type="file"] {
      display: none;
    }
    .file-input-label {
      display: inline-block;
      padding: 5px 10px;
      background: #ccc;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin-bottom: 5px;
      height: 27.2px; /* Reduced from 32px by 15% (32 * 0.85 = 27.2) */
      line-height: 17.2px; /* Adjusted to center text (27.2 - 10 padding = 17.2) */
      box-sizing: border-box;
      text-align: center;
      min-width: 120px; /* Minimum width for "Choose Files" */
      width: auto; /* Allow width to grow */
      white-space: nowrap; /* Prevent text wrapping */
      vertical-align: middle; /* Ensure alignment with input */
    }
    .file-input-label:hover {
      background: #bbb;
    }
  </style>

  <!-- Section 3 - STYLE/CSS - RIGHT (PREVIEW AND SAMPLES) -->
  <style>
    #right-panel {
      flex: 1;
      padding-left: 20px;
      padding-top: 30px;
      min-width: 300px;
    }
    #preview {
      width: 600px;
      height: 600px;
      border: 1px solid #ccc;
      position: relative;
      background: #ccc;
      margin: 0 auto;
    }
    #preview img {
      position: absolute;
      max-width: 600px;
      max-height: 600px;
      cursor: grab;
    }
    #preview img.dragging {
      cursor: grabbing;
    }
    #coordinates {
      margin-top: 10px;
      text-align: center;
    }
    #direction-emojis {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    .direction-emoji, .magnify-emoji {
      cursor: pointer;
      font-size: 20px;
    }
    #enlarged-preview {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ccc;
      border: 1px solid #ccc;
      z-index: 1000;
      max-width: 90%;
      max-height: 90%;
    }
    #enlarged-preview img {
      position: absolute;
    }
    #preview-samples-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .sample-container {
      width: 140px;
      height: 140px;
      border: 1px solid #ccc;
      position: relative;
      background: #ccc;
    }
    .sample-container img {
      position: absolute;
      max-width: 140px;
      max-height: 140px;
    }
  </style>

  <!-- Section 4 - STYLE/CSS - BOTTOM (MINT AND BACKGROUND) -->
  <style>
    #mint-section {
      position: fixed;
      bottom: 20px;
      left: 20px;
    }
    #mintButton {
      padding: 10px 20px;
      background: #f4c149;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    #mintButton:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    #mintButton:hover:not(:disabled) {
      background: #e0b040;
    }
    #mintFeeDisplay {
      margin-top: 5px;
      font-size: 12px;
    }
    #background-section {
      position: fixed;
      bottom: 20px;
      right: 20px;
      text-align: right;
    }
    #background-image {
      max-width: 200px;
      max-height: 200px;
      margin-top: 10px;
    }
    #background-metadata {
      margin-top: 5px;
      font-size: 12px;
      word-break: break-all;
    }
  </style>

  <!-- Section 5 - STYLE/CSS - TEXTAREA -->
  <style>
    textarea {
      width: 100%;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 5px;
      box-sizing: border-box;
      resize: vertical;
    }
  </style>

  <!-- Section 6 - STYLE/CSS - BUTTONS -->
  <style>
    button {
      padding: 5px 10px;
      background: #ccc;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #bbb;
    }
  </style>

  <!-- Section 7 - STYLE/CSS - CONFIRMATION DIALOG -->
  <style>
    .confirmation-dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 1px solid #ccc;
      padding: 20px;
      z-index: 1000;
      text-align: center;
    }
    .confirmation-dialog p {
      margin: 0 0 20px;
    }
    .confirmation-dialog .buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .yes-button, .no-button {
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .yes-button {
      background: #f4c149;
      color: black;
    }
    .yes-button:hover {
      background: #e0b040;
    }
    .no-button {
      background: #ccc;
      color: black;
    }
    .no-button:hover {
      background: #bbb;
    }
  </style>

  <!-- Section 8 - STYLE/CSS - H1 -->
  <style>
    h1 {
      font-family: 'Rowdies', sans-serif;
      font-weight: 400;
      margin: 0 0 20px;
      text-align: center;
    }
  </style>

  <!-- Section 10 - SPHERE ANIMATION STYLES (from 2 iterations ago) -->
  <style>
    .animation-wrapper {
      width: 50%;
      padding-bottom: 50%;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2000; /* Ensure it floats above the app */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .sphere-animation {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 580px;
      height: 580px;
      margin: -290px 0 0 -290px;
    }

    .sphere path {
      fill: #000000; /* Solid black fill */
      stroke-width: 1px;
      stroke: rgba(80,80,80,.35);
      backface-visibility: hidden;
    }

    @media (min-width: 500px) {
      .sphere path {
        stroke-width: .4px;
      }
    }
  </style>
</body>
</html>
